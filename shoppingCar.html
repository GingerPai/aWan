<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>阿万壽司</title>
    <link rel="shortcut icon" href="favicon.png" />
    <link rel="stylesheet" href="js/owlcarousel/assets/owl.carousel.min.css" />
    <link
      rel="stylesheet"
      href="js/owlcarousel/assets/owl.theme.default.min.css"
    />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/sweetalert2.min.css">
    <link rel="stylesheet" href="css/all.min.css" />
    <link rel="stylesheet" href="css/webcolor.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/page.css">
    <link rel="stylesheet" href="css/mobNav.css">
    <style>
      body {
        color: var(--webcolorDarkGreen);
        padding-bottom: 50px;
      }
      h2 {
        margin-top: 50px;
      }
      #shoppinglist {
        display: flex;
        justify-content: center;
        align-items: center;
        color: var(--webcolorDarkGreen);
      }
      .menus,
      .add {
        width: 30px;
        height: 30px;
        /* border: 1px solid #000; */
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0px 10px;
        background-color: var(--webcolorDarkGreen);
        color: #fff;
        font-size: 30px;
        line-height: 30px;
      }
      .menus {
        line-height: 25px;
      }
      .count {
        width: 60px;
        text-align: center;
        color: var(--webcolorDarkGreen);
        border: 1px solid var(--webcolorDarkGreen);
      }
      .itemQuantity > * {
        display: inline-block;
        vertical-align: middle;
      }
      .table th,
      .table td {
        text-align: center;
        vertical-align: middle;
        color: var(--webcolorDarkGreen);
      }
      #bookingdate {
        border: none;
        border-radius: 0%;
        border: 1px solid var(--webcolorDarkGreen);
      }
      .lunchtime, .dinnertime{
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }
      .time {
        padding: 5px 10px;
        margin: 10px;
        border: 1px solid var(--webcolorDarkGreen);
        color: var(--webcolorDarkGreen);
        cursor: pointer;
        transition: 0.3s;
      }
      .time:hover {
        background-color: var(--webcolorDarkGreen);
        color: #fff;
        transform: scale(0.98);
        transition: 0.1s;
      }
      .time.active {
        background-color: var(--webcolorDarkGreen);
        color: #fff;
      }
      #conrirmBtn {
        background-color: var(--webcolorDarkGreen);
        color: #fff;
        width: 200px;
        margin-top: 50px;
        border-radius: 50px;
        letter-spacing: 1px;
        font-size: 18px;
        font-weight: 700;
      }
      #conrirmBtn:hover {
        background-color: var(--webcolorDarkGreend);
        transform: scale(0.995);
        transition: 0.1s;
      }
      /* sweetAlert css */
      .swal2-footer a {
        color: #1f74b6;
        font-weight: 600;
        text-decoration: none;
      }
      @media screen and (max-width: 575px){
        h2 {
            margin-top: 30px;
            font-size: 21px;
        }
        th.item {
            width: 5%;
        }
        th.itemName {
            width: 20%;
        }
        th.itemPrice {
            width: 12%;
        }
        th.itemQuantity {
            width: 30%;
        }
        th.subTotal {
            width: 12%;
        }
        th.del {
          width: 15%;
        }
        .menus, .add {
          width: 20px;
          height: 20px;
          margin: 0px 5px;
          font-size: 20px;
          line-height: 17px;
        }
        input.count {
            width: 30px;
        }
        button.btn.btn-danger.btnDel {
            padding: 5px;
            font-size: 12px;
        }


      }
    </style>
  </head>
  <body>
    <div class="nav">
      <!-- Mobile Navbar -->
      <div id="mobnav" class="d-sm-none">
          <div id="mobNavMain">
              <div id="mobNavMainLeft">
                  <a href="index.html" class="navbar-brand">
                      <img id="mobnav-logo" src="images/A_WAN_log.png" alt="">
                  </a>
              </div>
              <div id="mobNavMainRight">
                  <a href="shoppingCar.html" id="MobShoppingCar">
                      <i class="fa-solid fa-cart-shopping"></i>
                  </a>
                  <div id="mobMenuIcon" class="openMenu">
                      <div class="mobMenuIconComp"></div>
                      <div class="mobMenuIconComp"></div>
                      <div class="mobMenuIconComp"></div>
                      <div class="mobMenuIconComp"></div>
                  </div>
              </div>
          </div>
          <div id="mobNavMenu">
              <ul id="mobMenu">
                  <li class="nav-item me-1">
                      <a class="nav-link" href="index.html#news">最新消息</a>
                  </li>
                  <li class="nav-item me-1">
                      <a class="nav-link" href="index.html#product">阿万產品</a>
                  </li>
                  <li class="nav-item me-1">
                      <a class="nav-link" href="index.html#chef">店家介紹</a>
                  </li>
                  <li class="nav-item me-1">
                      <a class="nav-link" href="index.html#form">聯絡我們</a>
                  </li>
                  <li id="isLoginHide" class="nav-item me-1 d-flex flex-row justify-content-center align-content-center">
                      <a href="register.html" class="nav-link">註冊</a>
                      <a href="" class="nav-link" data-bs-toggle="modal" data-bs-target="#loginModal" >登入</a>
                  </li>
                  <li class="nav-item me-1 isLogoutHide d-none">
                      <a class="nav-link" href="memberCenter.html" id="toMemberCenter">會員中心</a>
                  </li>
                  <li class="nav-item me-1 isLogoutHide d-none">
                      <a class="nav-link logout" href="javascript:void(0)" id="logout">登出</a>
                  </li>
              </ul>
          </div>
      </div>
      <!-- Desktop Nabbar -->
      <div class="container-md my-md-2 d-none d-sm-block">
          <div class="navRow">
              <a href="index.html" class="navbar-brand">
                  <img id="nav-logo" src="images/A_WAN_log.png" alt="">
              </a>
              <div class="" id="navbarNav">
                  <ul class="navMenu" id="">
                      <li class="nav-item me-1">
                          <a class="nav-link" href="index.html#news">最新消息</a>
                      </li>
                      <li class="nav-item me-1">
                          <a class="nav-link" href="index.html#product">阿万產品</a>
                      </li>
                      <li class="nav-item me-1">
                          <a class="nav-link" href="index.html#chef">店家介紹</a>
                      </li>
                      <li class="nav-item me-1">
                          <a class="nav-link" href="index.html#contact">聯絡我們</a>
                      </li>
                  </ul>
              </div>
              <div id="navFunction">
                  <a href="shoppingCar.html" id="shoppingCar">
                      <i class="fa-solid fa-cart-shopping"></i>
                  </a>
                  <a href="" class="btn btn-outline-dark"  data-bs-toggle="modal" data-bs-target="#loginModal" id="openloginModal">登入</a>
                  <div id="member" class="d-none">
                      <img src="images/member_icon.svg" alt="">
                      
                      <ul id="memberMenu" class="d-none">
                          <li><a href="memberCenter.html" id="toMemberCenter"><p>會員中心</p></a></li>
                          <li><a class="logout" href="javascript:void(0)" id="logout"><p>登出</p></a></li>
                      </ul>
                  </div>
              </div>
          </div>
      </div>
    </div>
    <!-- loginModal-->
    <div class="modal" tabindex="-1" id="loginModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                <h2 class="modal-title">會員登入</h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                <div class="mb-2 mb-md-3">
                    <label for="" class="form-label">會員帳號</label>
                    <input type="text" class="form-control" name="memberAcount" id="memberAcount">
                </div>
                <div class="mb-2 mb-md-3">
                    <label for="" class="form-label">會員密碼</label>
                    <input type="password" class="form-control" name="memberPassword" id="memberPassword">
                </div>
                </div>
                <div class="modal-footer d-flex flex-row justify-content-between">
                    <a href="register.html" class="btn border-primary text-primary">還沒有帳號，註冊去</a>
                    <div>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">關閉</button>
                        <button type="button" id="login" class="btn btn-primary">登入</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <section>
      <div class="container pageHead">
        <div class="row">
          <div class="col-12">
            <h1 class="titleH1"> 預約點餐</h1>
          </div>
        </div>
      </div>
    </section>
    <section id="shoppinglist">
      <div class="container">
        <h2>- 餐點內容 -</h2>
        <div class="row">
          <div class="col-12">
            <table class="table">
              <thead class="scl_head">
                <tr>
                  <th class="item">項次</th>
                  <th class="itemName">產品名稱</th>
                  <th class="itemPrice">產品價格</th>
                  <th class="itemQuantity">產品數量</th>
                  <th class="subTotal">小計</th>
                  <th class="del"></th>
                </tr>
              </thead>
              <tbody id="scl_body">
                <tr>
                  <td class="item">1</td>
                  <td class="itemName">鮭魚握壽</td>
                  <td class="itemPrice">40</td>
                  <td class="itemQuantity">
                    <div class="menus">-</div>
                    <input type="text" class="count" value="1">
                    <div class="add">+</div>
                  </td>
                  <td class="subTotal">80</td>
                  <td><button class="btn btn-danger">刪除</button></td>
                </tr>
              </tbody>
              <tbody>
                <tr>
                  <td class="item"></td>
                  <td class="itemName"></td>
                  <td class="itemPrice"></td>
                  <td class="itemQuantity">合計</td>
                  <td class="subTotal" id="total">0</td>
                  <td></td>
                </tr>
                <tr>
                  <td class="item"></td>
                  <td class="itemName"></td>
                  <td class="itemPrice"></td>
                  <td class="itemQuantity">稅額</td>
                  <td class="subTotal" id="tax">0</td>
                  <td></td>
                </tr>
                <tr>
                  <td class="item"></td>
                  <td class="itemName"></td>
                  <td class="itemPrice"></td>
                  <td class="itemQuantity">總計</td>
                  <td class="subTotal" id="sum">0</td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
    <section>
      <div class="container">
        <div class="row">
          <div class="col-md-6 m-auto">
            <h2>- 取餐日期 -</h2>
            <div class="">
                <input type="date" id="bookingdate" name="bookingdate" class="form-control" placeholder="請輸入年-月-日"/ >
                <div id="info_bookingdate" class="form-text text-end">請輸入年月日</div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 m-auto">
            <h2>- 取餐時段 -</h2>
            <div class="">
              <h3>- 中餐時段 -</h3>
              <div class="lunchtime">
                <div class="time">11:00</div>
                <div class="time">11:30</div>
                <div class="time">12:00</div>
                <div class="time">12:30</div>
                <div class="time">13:00</div>
                <div class="time">13:30</div>
              </div>
              <h3>- 晚餐時段 -</h3>
              <div class="dinnertime">
                <div class="time">17:00</div>
                <div class="time">17:30</div>
                <div class="time">18:00</div>
                <div class="time">18:30</div>
                <div class="time">19:00</div>
                <div class="time">19:30</div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12 text-center">
            <button class="btn" id="conrirmBtn">確認訂單</button>
          </div>
        </div>
      </div>
    </section>
    <script src="js/jquery-3.7.0.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/owlcarousel/owl.carousel.js"></script>
    <script src="js/sweetalert2.all.min.js"></script>
    <script src="js/url.js"></script>
    <script src="js/cookie.js"></script>
    <script src="js/all.js"></script>
    <script>
      let memberAcount = "";
      let bookingdate = "";  //預定取餐日期
      let bookingtime = "";  //預定取餐時段
      let createOrder_meg = ""; //創建訂單回覆訊息
      let createOrderlist_meg = "";  //創建訂單清單回覆訊息
      let orderList = [];
      let getData = localStorage.getItem("shopping"); //讀取localStorage 陣列
      let getData_toArray = JSON.parse(getData); //轉json
      if (getData_toArray != null) {
        orderList = getData_toArray;
      }
      $(function () {
        runList();
        function runList(){
            let i = 1;
            $("#scl_body").empty("");
            let total = 0;
            let tax = 0;
            let sum = 0;
            orderList.forEach((item) => {
                let subtotal = item.Price * item.Quantity;
                let str =
                    '<tr><td class=" item">' +
                    i +
                    '</td><td class="itemName">' +
                    item.Name +
                    '</td><td class="itemPrice">' +
                    item.Price +
                    '</td><td class="itemQuantity"><div class="menus" data-id="' +
                    item.ID +
                    '">-</div><input type="number" class="count" value="' + item.Quantity + '" data-id="' + item.ID + '" readonly=="readonly"><div class="add" data-id="' +
                    item.ID +
                    '">+</div></td><td class="subTotal">' +
                    subtotal +
                    '</td><td><button class="btn btn-danger btnDel" data-id="' +
                    item.ID +
                    '">刪除</button></td></tr>';
                $("#scl_body").append(str);
                i++;
                total += subtotal;
                sum = tax + total;
            });
            $("#total").text(total);
            $("#sum").text(sum);
        }

        $(".menus").click(function(){
            let i = $(this).siblings(".count").val();
            if(i>1){
                i--;
            }else{
                i=1;
            }
            $(this).siblings(".count").val(i);
            orderList.forEach((item)=>{
                if(item.ID == $(this).data("id")){
                    item.Quantity = i;
                }
            })
            var shopingorderlist = JSON.stringify(orderList);
            localStorage.setItem("shopping", shopingorderlist);
            console.log(orderList);
            runList();
            $(location).prop("href", location.href);
        });
        $(".add").click(function(){
            let i = $(this).siblings(".count").val();
            if(i < 10){
                i++;
            }else{
                i=10;
            }
            $(this).siblings(".count").val(i);
            orderList.forEach((item)=>{
                if(item.ID == $(this).data("id")){
                    item.Quantity = i;
                }
            })
            var shopingorderlist = JSON.stringify(orderList);
            localStorage.setItem("shopping", shopingorderlist);
            console.log(orderList);
            runList();
            $(location).prop("href", location.href);
        })
        $(".count").bind("input propertychang",function(){
            onlyNum($(".count"));
            let i = $(this).siblings(".count").val();
            if(i < 10){
                i++;
            }else{
              i=10;
            }
            $(this).siblings(".count").val(i);
        })
        $(".btnDel").click(function(){
            console.log($(this).data("id"));
            for(let j = 0;j<orderList.length;j++){
                if(orderList[j].ID == $(this).data("id")){
                    orderList.splice(j,1);
                }
            }
            var shopingorderlist = JSON.stringify(orderList);
            localStorage.setItem("shopping", shopingorderlist);
            console.log(orderList);
            runList();
            $(location).prop("href", location.href);
        })

        //Get today's date and the date seven days from now
        const timestampsToday = new Date();
        let mindate = timestampsToday.getFullYear() + "-" + (timestampsToday.getMonth() + 1).toString().padStart(2, '0') + "-" + timestampsToday.getDate().toString().padStart(2, '0');
        console.log(mindate);

        let afterSeven = new Date(timestampsToday);
        afterSeven.setDate(timestampsToday.getDate() + 7);
        afterSeven = afterSeven.getFullYear() + "-" + (afterSeven.getMonth() + 1).toString().padStart(2, '0') + "-" + afterSeven.getDate().toString().padStart(2, '0');
        console.log(afterSeven);

        $("#bookingdate").attr("min",mindate);
        $("#bookingdate").attr("max",afterSeven);
        $("#bookingdate").bind("input propertychang", function(){
          console.log($(this).val());
          bookingdate = $(this).val();
          $(this).removeClass("bdr");
        });
        $(".time").click(function(){
          $(".time").removeClass("bdr");
          $(".time").removeClass("active");
          $(this).addClass("active");
          bookingtime = $(this).text();
          console.log(bookingtime);
        })
        
        $("#conrirmBtn").click(function(){
          let createorder = false;  //紀錄訂單成立與否
          let createorderlist = false;  //紀錄訂單清單成立與否
          // 生成訂單號碼 ---------------------------------------- start
          // 生成當前時間戳記
          const timestamp = Date.now();
          // 生成隨機數
          const random = Math.floor(Math.random() * 10000);
          // 將時間戳記和隨機數组合在一起
          const orderNumber = "T" + timestamp + random; //訂購單號
          // 生成訂單號碼 ---------------------------------------- end
          
          // 生成訂單時間&&日期 ---------------------------------------- start
          let currentDate = new Date();
          let hours = currentDate.getHours();
          let minutes = currentDate.getMinutes();
          let seconds = currentDate.getSeconds();
          // 添加前導零，確保時間格式為两位数
          if (hours < 10) hours = "0" + hours;
          if (minutes < 10) minutes = "0" + minutes;
          if (seconds < 10) seconds = "0" + seconds;
          let formattedTime = hours + ":" + minutes + ":" + seconds;

          let year = currentDate.getFullYear();
          let month = currentDate.getMonth() + 1; // 月份从0開始，所以要加1
          let day = currentDate.getDate();
          // 添加前導零，確保日期格式為两位数
          if (month < 10) month = "0" + month;
          if (day < 10) day = "0" + day;
          let formattedDate = year + "-" + month + "-" + day;
          let ordertime = formattedDate + " " +formattedTime; //訂單成立時間
          // 生成訂單時間&&日期 ---------------------------------------- end

          let userAcoucnt = $(this).data("useracount");  //訂購人
          let orderSum = $("#sum").text(); //訂單總金額
          console.log(orderList);          //訂購內容
          console.log(userAcoucnt);        //訂購人
          console.log(orderNumber);        //訂購單號
          console.log(orderSum);           //訂單總金額
          console.log(ordertime);          //訂單成立時間
          console.log(bookingdate);        //預定取餐日期
          console.log(bookingtime);        //預定取餐時段
          if(orderSum == 0) {
            Swal.fire({
              icon: 'info',
              title: "您尚未預定任何餐點",
              footer: '<a href="index.html#product">預定餐點?</a>'
            })
            // alert("您尚未預定任何餐點");
          } else if (userAcoucnt == "" || userAcoucnt == null || userAcoucnt == undefined ){
              Swal.fire({
                position: "center",
                title: "請登入會員",
                showConfirmButton: false,
                timer: 1500,
              });
            // alert("請登入會員");
          } else if (bookingdate == ""){
            Swal.fire({
              position: "center",
              title: "請輸入取餐日期",
              showConfirmButton: false,
              timer: 1500,
            });
            // alert("請輸入取餐日期");
            $("#bookingdate").addClass("bdr");
          } else if (bookingtime == ""){
            Swal.fire({
              position: "center",
              title: "請選取取餐時段",
              showConfirmButton: false,
              timer: 1500,
            });
            // alert("請選取取餐時段");
            $(".time").addClass("bdr");
          } else {
            console.log(userAcoucnt);
            console.log(orderNumber);
            console.log(orderSum);
            console.log(ordertime);
            console.log(bookingdate);
            console.log(bookingtime);
            // 執行製作訂單
            $.ajax({
              type: "POST",
              url: url+'member/create_memberorder.php',
              dataType: "json",
              async: false,
              data: {
                memberAcount: userAcoucnt,   //訂購人
                orderNumber: orderNumber,    //訂購單號
                total: orderSum,             //訂單總金額
                ordertime: ordertime,        //訂單成立時間
                bookingdate: bookingdate,    //預定取餐日期
                bookingtime: bookingtime,     //預定取餐時段
              },
              success: function(data){
                if (data.state){
                  // console.log(data.message);
                  // 儲存訂單回報訊息
                  createOrder_meg = data.message;
                  createorder = true;
                } else {
                  // console.log(data.message);
                  // 儲存訂單回報訊息
                  createOrder_meg = data.message;
                  createorder = false;
                }
              },
              error: function(){
                console.log("錯誤member/create_memberorder.php");
              }
              
            })
  
            orderList.forEach((item)=>{
              console.log(orderNumber);       //訂購單號
              console.log(userAcoucnt);       //訂購人
              console.log(item.ID);           //產品編號
              console.log(item.Name);         //產品名稱
              console.log(item.Price);        //產品價格
              console.log(item.Quantity);     //產品數量
              console.log(ordertime);         //訂單時間
              $.ajax({
                type: "POST",
                url: url + "member/create_memberorderlist.php",
                dataType: "json",
                async: false,
                data: {
                  orderNumber: orderNumber,    //訂購單號
                  memberAcount: userAcoucnt,   //訂購人
                  productID: item.ID,          //產品編號
                  productName: item.Name,      //產品名稱
                  price: item.Price,           //產品價格
                  orderAmount: item.Quantity,  //產品數量
                  ordertime: ordertime,        //訂單時間
                },
                success: function(data){
                  if (data.state){
                    // console.log(data.message);
                    // 儲存訂單清單是否成功回報訊息
                    createOrderlist_meg = data.message;
                    createorderlist = true;
                  } else {
                    // console.log(data.message);
                    // 儲存訂單清單是否成功回報訊息
                    createOrderlist_meg = data.message;
                    createorderlist = false;
                  }
                },
                error: function(){
                  alert("錯誤member/create_memberorderlist.php");
                }
              })
            })
            // 如果"訂單"與"訂單清單"成功
            if (createorder && createorderlist){
              orderList = [];   //清空array
              localStorage.removeItem("shopping");  //刪除localStorage
              runList();
              $("#bookingdate").val("");
              $(".time").removeClass("active");
              console.log(createOrder_meg + "--" + createOrderlist_meg);
              Swal.fire({
                title: '外帶餐點訂單預約成功',
                text: "預約單號:" + orderNumber + "，詳細內容請至會員中心查詢",
                icon: 'success',
                showCancelButton: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: '確認',
              })
              // alert("外帶餐點訂單預約成功");
              var timeoutId = setTimeout(function() {
                  location.href = "index.html";
              }, 1000);
            }else{
              console.log(createOrder_meg + "--" + createOrderlist_meg);
              Swal.fire({
                position: "center",
                icon: 'error',
                title: "外帶餐點訂單預約失敗",
                showConfirmButton: false,
                timer: 1000,
              });
              // alert("外帶餐點訂單預約失敗");
            }
          }
        })
        // 判斷是否登入過---------------------------------start
        //確認uid是否存在，若存在傳遞至後端check_uid_api.php確認是否合法
        if (getCookie("uid") != "") {
          //uid存在
          $.ajax({
            type: "POST",
            url: url + "member/check_uid_api.php",
            dataType: "json",
            data: {
              uid: getCookie("uid"),
            },
            success: showdata_check_uid,
            error: function () {
              alert("錯誤check_uid_api.php ");
            },
          });
        }
        // 判斷是否登入過---------------------------------end
        // 會員登入 ----------------------------start
        $("#login").click(function () {
          memberAcount = $("#memberAcount").val();
          $.ajax({
            type: "POST",
            url: url + "member/login_api.php",
            dataType: "json",
            data: {
              memberAcount: memberAcount,
              password: $("#memberPassword").val(),
            },
            success: showdata_login,
            error: function () {
              console.log("登入錯誤, /web202308/moz/php/login_api.php");
            },
          });
        });
        // 會員登入 ----------------------------end

      });
        //僅能輸入數字 ------------ start
        function onlyNum(tag) {
            value = tag.val();
            value = value.replace(/[^0-9]/g, "");
            tag.val(value);
        }
        
        //僅能輸入數字 ------------ end
        function showdata_check_uid(data){
          console.log(data);
          if (data.state){
            $("#openloginModal").addClass("d-none");
            $("#member").removeClass("d-none");
            //驗證成功，顯示已登入狀態
            $("#conrirmBtn").attr("data-useracount", data.data[0].UserAcount );
            // mobile Navbar login --- start
            mobMenuHide();
            $(".isLogoutHide").removeClass("d-none");
            $("#isLoginHide").addClass("d-none");
            // mobile Navbar login --- end
          }else{
            //驗證失敗登入
            $("#member").addClass("d-none");
            $("#login").removeClass("d-none");
          }
        }
        // 會員登入function ----------------------------start
        function showdata_login(data) {
          console.log(data);
          // 如果回傳回來的json欄位state為true則重整畫面將欄位清空
          if (data.state) {
            if(data.data[0].UserState == "true"){
              memberAcount = data.data[0].UserAcount;
              Swal.fire({
                position: "top-end",
                icon: "success",
                title: data.message + data.data[0].Nickname + "歡迎登入",
                showConfirmButton: false,
                timer: 1500,
              });
              //存入cookie
              setCookie('uid', data.data[0].Uid, 7);
              // alert(data.data[0].Nickname + "歡迎登入");
              $("#loginModal").modal("hide");
              $("#openloginModal").addClass("d-none");
              $("#member").removeClass("d-none");

            }else{

              alert("此帳號被停權請聯絡管理員");
            }

          } else {
            alert(data.message);
          }
        }
    </script>
  </body>
</html>
